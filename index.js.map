{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":[" \nimport axios from 'axios';\n \nconst API_KEY = '50196951-391601c250e619b024764c208';  \nconst BASE_URL = 'https://pixabay.com/api/';\n\n \nexport async function getImagesByQuery(query, page) {\n   \n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,  \n    per_page: 15,  \n  };\n\n  try {\n     \n    const response = await axios.get(BASE_URL, { params });\n\n     \n    return response.data;\n\n  } catch (error) {\n     \n    console.error('Помилка під час запиту до Pixabay API:', error);\n     \n    throw error;\n  }\n}\n"," \nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n \nconst galleryElement = document.querySelector('.gallery');\n\n \nconst loaderElement = document.querySelector('.loader');  \n\n \nconst loadMoreButton = document.querySelector('.load-more-button');  \n\n \nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',  \n    captionDelay: 250,   \n});\n\n \nfunction createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n        <p class=\"info-item\"><b>Views</b> ${views}</p>\n        <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n      </div>\n    </li>\n  `;\n}\n\n \nexport function appendGalleryMarkup(images) {\n   \n  if (!images || images.length === 0) {\n    return;  \n  }\n\n   \n  const galleryHTML = images.map(image => createImageCard(image)).join('');\n\n   \n  galleryElement.insertAdjacentHTML('beforeend', galleryHTML);\n\n  \n  lightbox.refresh();\n}\n\n \nexport function clearGallery() {\n  galleryElement.innerHTML = '';  \n}\n\n \nexport function showLoader() {\n  if (loaderElement) {\n    loaderElement.classList.add('visible');  \n  }\n}\n \nexport function hideLoader() {\n   if (loaderElement) {\n    loaderElement.classList.remove('visible');  \n  }\n}\n\n \nexport function showLoadMoreButton() {\n  if (loadMoreButton) {\n    loadMoreButton.classList.remove('is-hidden');\n  }\n}\n \nexport function hideLoadMoreButton() {\n  if (loadMoreButton) {\n    loadMoreButton.classList.add('is-hidden');\n  }\n}\n \nexport function getGalleryCardHeight() {\n  const firstGalleryItem = galleryElement.querySelector('.gallery-item');\n  if (firstGalleryItem) {\n    const cardRect = firstGalleryItem.getBoundingClientRect();\n    return cardRect.height;\n  }\n  return 0;  \n}\n"," \nimport { getImagesByQuery } from './js/pixabay-api'; \nimport {\n  appendGalleryMarkup,  \n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,  \n  hideLoadMoreButton,\n  getGalleryCardHeight  \n} from './js/render-functions';  \nimport iziToast from \"izitoast\"; \nimport \"izitoast/dist/css/iziToast.min.css\";  \n\n\n \nconst searchForm = document.querySelector('.form');\nconst searchInput = searchForm.querySelector('input[name=\"search-text\"]');\nconst loadMoreButton = document.querySelector('.load-more-button');  \n\n \nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 15;  \nlet totalHits = 0;  \n\n \nhideLoadMoreButton();\n\n\n \nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();  \n\n  const query = searchInput.value.trim();  \n\n  \n  if (query === '') {\n    iziToast.warning({\n      title: 'Увага',\n      message: 'Будь ласка, введіть пошуковий запит.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n   \n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0; \n  clearGallery();  \n  hideLoadMoreButton();  \n  showLoader();  \n\n  try {\n     \n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n     \n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'Інформація',\n        message: 'На жаль, зображень за вашим запитом не знайдено. Спробуйте ще раз!',\n        position: 'topRight',\n      });\n    } else {\n      \n      appendGalleryMarkup(data.hits);  \n      totalHits = data.totalHits;  \n\n     \n      if (data.hits.length < totalHits) {\n         showLoadMoreButton();  \n      } else {\n         \n         iziToast.info({\n           title: 'Інформація',\n           message: \"We're sorry, but you've reached the end of search results.\",\n           position: 'topRight',\n         });\n      }\n    }\n\n  } catch (error) {\n    \n     iziToast.error({\n        title: 'Помилка',\n        message: 'Не вдалося завантажити зображення. Спробуйте пізніше.',\n        position: 'topRight',\n      });\n      console.error('Помилка пошуку:', error);\n  } finally {\n \n    hideLoader();  \n    searchForm.reset(); \n  }\n});\n\n \nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;  \n  showLoader();  \n  hideLoadMoreButton();  \n\n  try {\n     \n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n     \n    appendGalleryMarkup(data.hits);\n\n     \n    const loadedImagesCount = currentPage * perPage;\n    if (loadedImagesCount < totalHits) {\n       showLoadMoreButton();  \n    } else {\n        \n       hideLoadMoreButton();  \n       iziToast.info({\n         title: 'Інформація',\n         message: \"We're sorry, but you've reached the end of search results.\",\n         position: 'topRight',\n       });\n    }\n\n    \n    const cardHeight = getGalleryCardHeight();\n    if (cardHeight > 0) {\n       window.scrollBy({\n         top: cardHeight * 2,  \n         behavior: 'smooth'  \n       });\n    }\n\n\n  } catch (error) {\n   \n     iziToast.error({\n        title: 'Помилка',\n        message: 'Не вдалося завантажити додаткові зображення. Спробуйте пізніше.',\n        position: 'topRight',\n      });\n      console.error('Помилка завантаження додаткових зображень:', error);\n      showLoadMoreButton();  \n  } finally {\n    \n    hideLoader();  \n  }\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","error","galleryElement","loaderElement","loadMoreButton","lightbox","SimpleLightbox","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","appendGalleryMarkup","images","galleryHTML","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getGalleryCardHeight","firstGalleryItem","searchForm","searchInput","currentQuery","currentPage","perPage","totalHits","event","iziToast","data","cardHeight"],"mappings":"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"}